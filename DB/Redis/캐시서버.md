# 캐시 서버란

다른 MySQL, Oracle 등 RDBMS가 있음에도, 캐시 서버를 사용하는 이유가 있다.  
DB는 데이터를 디스크에 직접 쓰기 때문에 서버에 문제가 발생하여 다운되더라도 데이터가 손실되지 않는다.  
대신 매번 디스크에 접근해야 하기 때문에 사용자가 많아질 수록 부하가 많아져 느려질 수 있다.  
일반적으로 규모가 작은 서비스나, 사용자가 적은 서비스의 경우 WEB - WAS - DB 구조로도 무리가 없지만,  
사용자가 늘어난다면 과부하가 될 수 있기 때문에 캐시 서버를 도입한다.

캐시는 한 번 읽은 데이터를 임의의 공간에 저장하여 다음에 읽을 때 빠르게 결과를 받을 수 있도록 도와주는 공간이다.  
같은 요청이 여러 번 들어오는 경우 매번 DB를 거치는 것이 아니라 캐시 서버에서 첫 번째 요청 이후 저장된 결과를  
빠르게 바로 내려주기 때문에 DB의 부하를 줄이고 서비스의 속도도 느려지지 않는 장점이 있다.

## Look aside cache, Write Back

캐시 서버에는 __Look aside cache__ 패턴과 __Write Back__ 패턴이 존재한다.

### Look aside cache

- 클라이언트가 데이터 요청
- WAS는 데이터가 존재하는지 Cache 서버 확인
- Cache 서버에 데이터 있으면 DB에 데이터를 조회하지 않고 Cache 서버에 있는 결과를 클라이언트에 반환 (Cache Hit)
- Cache 서버에 데이터 없으면 DB에서 데이터를 조회하고 Cache에 저장 후 결과 반환 (Chache Miss)

### Write Back

- WAS에서 모든 데이터를 Cache 서버에 저장
- Cache 서버에 특정 시간 동안 데이터가 저장됨
- Cache 서버에 있는 데이터를 DB에 저장
- DB에 저장된 Cache 서버의 데이터 삭제

> 쿼리를 한 번씩 100번 보다, 100개의 쿼리를 붙여서 한 번에 날리는 것이 더 효율적인 원리를 이용한 방식  
> 데이터가 저장되기 전 메모리 공간에 머무는데, 이 때 서버에 장애가 발생하여 다운되면 데이터 손실 가능성이 있음.